<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="~{ layout/layout.html }">
<head>
    <meta charset="UTF-8">
    <title>sohwakmo</title>
    <link rel="stylesheet" th:href="@{/css/home/home.css}">
</head>
<div layout:fragment="content">
<div id="body" style="height: 100%; width: 100%;">
        <div id="headerMsg" style="height: 7%; width: 100%; margin-bottom: 1%;">
            <h3><span th:text="${#authentication.principal.name}"></span>Îãò!!</h3>
            <span id="welcome">ÏÜåÌôïÎ™®ÏôÄ Ìï®Íªò ÎπõÎÇòÎäî ÎØ∏ÎûòÎ•º ÏúÑÌï¥ Îã¨Î†§Ïöî~~</span>
        </div>

        <!-- ÏÇ¨ÏõêÎ≤àÌò∏ Í∞ÄÏ†∏Ïò§Í∏∞ ÏúÑÌïú hidden -->
        <input id="get_employeeNo" type="hidden" th:value="${#authentication.principal.employeeNo}"/>

        <div style="height: 92%; width: 100%;">
            <div id="myWork" class="row" style="height: 49%; width: 100%; margin: 0 0 1% 0;">
                <div class="col-4" style="margin: 0; padding: 0 16px 0 0; height: 100%;">
                    <div id="work_info_div" style="margin: 0; height: 50%">
                        <h3>Hi! <span th:text="${#authentication.principal.name}"></span>Îãò,</h3>
                        <div id="notWorking_msg" th:if="${attendance=='notAttendance'}">
                            <h3>ÏïÑÏßÅ Ï∂úÍ∑º Ï†ÑÏûÖÎãàÎã§ :)</h3>
                        </div>
                        <div th:if="${attendance!='notAttendance'}">
                            <div id="working_msg" th:if="${attendance.endTime == '00:00'}">
                                <h3>Ï°∞Í∏àÎßå ÌûòÎÇ¥Ïöî!!</h3>
                            </div>
                            <div id="endWork_msg" th:if="${attendance.endTime != '00:00'}">
                                <h3>Ïò§ÎäòÎèÑ ÏàòÍ≥†ÌïòÏÖ®ÏäµÎãàÎã§!</h3>
                            </div>
                        </div>
                        <div th:if="${attendance=='notAttendance'}">
                            <div>
                                <button id="startButton" type="button" class="btn btn-primary allButton">ÏóÖÎ¨¥ ÏãúÏûë</button>
                            </div>
                        </div>
                        <!-- Ï∂úÍ∑ºÌõÑ Î≤ÑÌäº -->
                        <div th:if="${attendance != 'notAttendance'}" class="row">
                            <!-- ÏûêÎ¶¨ÎπÑÏõÄ Î≤ÑÌäº -->
                            <div th:if="${attendance.endTime == '00:00'}" class="col-6">
                                <div th:if="${attendance.state != 1}">
                                    <button type="button" id="absenceButton" class="btn btn-secondary halfButton">ÏûêÎ¶¨ ÎπÑÏõÄ</button>
                                </div>
                                <div th:if="${attendance.state == 1}">
                                    <button type="button" id="absenceReleaseButton" class="btn btn-secondary halfButton">ÏûêÎ¶¨ ÎπÑÏõÄ Ìï¥Ï†ú</button>
                                </div>
                            </div>
                            <!--ÏïÑÏßÅ ÏóÖÎ¨¥Ï§ëÏùºÎïå Î≤ÑÌäº -->
                            <div th:if="${attendance.endTime == '00:00'}" class="col-6">
                                <button type="button" id="endButton" class="btn btn-danger halfButton">ÏóÖÎ¨¥ Ï¢ÖÎ£å</button>
                            </div>
                            <!-- ÏóÖÎ¨¥Í∞Ä Îã§ÎÅùÎÇ¨ÏùÑÎïå Î≤ÑÌäº -->
                            <div th:if="${attendance.endTime != '00:00'}">
                                <button type="button" class="btn btn-secondary allButton" disabled>Ìá¥Í∑º ÏôÑÎ£å</button>
                            </div>
                        </div>
                    </div>

                    <!-- Ï∂úÍ≤∞ Í¥ÄÎ¶¨ -->
                    <div id="attendance_wrap">
                        <div id="time_info">
                            <!------------------ Ï∂úÍ∑ºxxxxxxxxxxxxx ---------->
                            <div th:if="${attendance=='notAttendance'}">
                                <div class="row">
                                    <div id="state_time2" class="state_time">
                                        <p>ÏóÖÎ¨¥Ï§ëÏù¥ ÏïÑÎãôÎãàÎã§.</p>
                                    </div>
                                </div>
                                <div id="div_time2" class="row">
                                    <div id="startTime2" class="startTime col-6">
                                        <p>Ï∂úÍ∑º ÏãúÍ∞Ñ</p>
                                        <p>00:00</p>
                                    </div>
                                    <div id="endTme2" class="endTme col-6">
                                        <p>ÏòàÏÉÅ Ìá¥Í∑º ÏãúÍ∞Ñ</p>
                                        <p>00:00</p>
                                    </div>
                                </div>
                            </div>
                            <!------------------ Ï∂úÍ∑ºoooooooooooo ---------->
                            <div th:if="${attendance != 'notAttendance' }">
                                <!--ÏòàÏÉÅ Ìá¥Í∑ºÏãúÍ∞Ñ -->
                                <div th:if="${attendance.endTime == '00:00'}">
                                    <!-- ÏûêÎ¶¨ÎπÑÏõÄÏù¥ ÏïÑÎãêÎïå -->
                                    <div th:if="${attendance.state!=1}">
                                        <div class="state_time row">
                                            <p><span class="light">üü¢</span> ÏóÖÎ¨¥Ï§ë : <span th:text="${workingTime}"></span></p>
                                        </div>
                                    </div>
                                    <!-- ÏûêÎ¶¨ÎπÑÏõÄ ÏÉÅÌÉúÏùºÎïå -->
                                    <div>
                                        <div th:if="${attendance.state==1}">
                                            <div class="state_time row">
                                                <p><span class="light">üü°</span>ÏûêÎ¶¨ÎπÑÏõÄ ÏÉÅÌÉú ÏûÖÎãàÎã§.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="startTime col-6">
                                            <p>Ï∂úÍ∑º ÏãúÍ∞Ñ</p>
                                            <p th:text="${attendance.startTime}"></p>
                                        </div>
                                        <div class="endTme col-6">
                                            <p>ÏòàÏÉÅ Ìá¥Í∑º ÏãúÍ∞Ñ</p>
                                            <p th:text="${attendance.expectEndTime}"></p>
                                        </div>
                                    </div>
                                </div>
                                <!-- ÏßÑÏßú Ìá¥Í∑ºÏãúÍ∞Ñ-->
                                <div th:if="${attendance.endTime != '00:00'}">
                                    <div class="state_time row">
                                        <p>ÎÇ¥ÏùºÎèÑ ÌôîÏù¥ÌåÖ!!</p>
                                    </div>
                                    <div class="row">
                                        <div class="startTime col-6">
                                            <p>Ï∂úÍ∑º ÏãúÍ∞Ñ</p>
                                            <p th:text="${attendance.startTime}"></p>
                                        </div>
                                        <div class="endTme col-6">
                                            <p>Ìá¥Í∑º ÏãúÍ∞Ñ</p>
                                            <p th:text="${attendance.endTime}"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-8" style=" margin: 0; padding: 0 0 0 16px;">
                    <div id="doc" class="border">
                        <div>
                            <form id="form">
                                <div class="row" style="padding-left: 16px">
                                    <div id="select_div" class="col-2">
                                        <select  id="payment" name="payment"  class="form-control" >
                                            <option value="vacation" th:attrappend="selected = ${vacation=='vacation' ? 'selected' : ''}">Ìú¥Í∞Ä/Ïó∞Ï∞®/Î∞òÏ∞®</option>
                                            <option value="trip" th:attrappend="selected = ${trip=='trip' ? 'selected' : ''}">Ï∂úÏû•</option>
                                            <option value="card" th:attrappend="selected = ${card=='card' ? 'selected' : ''}">Î™ÖÌï®Ïã†Ï≤≠</option>
                                            <option value="leave" th:attrappend="selected = ${leave=='leave' ? 'selected' : ''}">Ìá¥ÏÇ¨Ïã†Ï≤≠</option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                            <fieldset class="border-1" id="jb-table">
                                <table class="table" style="border-collapse: collapse">
                                    <thead>
                                    <tr>
                                        <th style="width: 16%"></th>
                                        <th style="width: 40%">Ï†úÎ™©</th>
                                        <th style="width: 22%">ÏûëÏÑ± ÏãúÍ∞Ñ</th>
                                        <th style="width: 22%">Í≤∞Ïû¨ ÏÉÅÌÉú</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                        <th:block th:each="l : ${docList}">
                                            <th:block th:if="${l.category} == 'Î™ÖÌï®' ">
                                            <tr th:onclick="|location.href='@{payment/businessCard/detail(no=${l.no})}'|">
                                                <td th:text="${l.no}"></td>
                                                <td th:text="${l.title}"></td>
                                                <td th:text="${ #temporals.format(l.createdTime, 'yyyyÎÖÑ MMÏõî ddÏùº') }"></td>
                                                <td th:text="${l.state}" style="color: #0a53be; font-weight: bold;"></td>
                                            </tr>
                                            </th:block>
                                            <th:block th:if="${l.category} == 'Ïó∞Ï∞®' or ${l.category} == 'Ïò§Ï†Ñ Î∞òÏ∞®' or ${l.category} == 'Ïò§ÌõÑ Î∞òÏ∞®'  ">
                                                <tr th:onclick="|location.href='@{payment/vacation/detail(no=${l.no})}'|">
                                                    <td th:text="${l.no}"></td>
                                                    <td th:text="${l.title}"></td>
                                                    <td th:text="${ #temporals.format(l.createdTime, 'yyyyÎÖÑ MMÏõî ddÏùº') }"></td>
                                                    <td th:text="${l.state}" style="color: #0a53be; font-weight: bold;"></td>
                                                </tr>
                                            </th:block>
                                            <th:block th:if="${l.category} == 'Ï∂úÏû•' ">
                                                <tr th:onclick="|location.href='@{payment/businessTrip/detail(no=${l.no})}'|">
                                                    <td th:text="${l.no}"></td>
                                                    <td th:text="${l.title}"></td>
                                                    <td th:text="${ #temporals.format(l.createdTime, 'yyyyÎÖÑ MMÏõî ddÏùº') }"></td>
                                                    <td th:text="${l.state}" style="color: #0a53be; font-weight: bold;"></td>
                                                </tr>
                                            </th:block>
                                            <th:block th:if="${l.category} == 'Ìá¥ÏÇ¨' ">
                                                <tr th:onclick="|location.href='@{payment/leave/detail(no=${l.no})}'|">
                                                    <td th:text="${l.no}"></td>
                                                    <td th:text="${l.title}"></td>
                                                    <td th:text="${ #temporals.format(l.createdTime, 'yyyyÎÖÑ MMÏõî ddÏùº') }"></td>
                                                    <td th:text="${l.state}" style="color: #0a53be; font-weight: bold;"></td>
                                                </tr>
                                            </th:block>
                                    </th:block>
                                    </tbody>
                                </table>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>


            <div id="line2" style="height:49%; padding-top: 1%;">
                <div class="row" style="height: 100%; ">
                    <!--Ï£ºÌôò-->
                    <div class="col-4" style="height: 100%; margin: 0;">
                        <div style="height: 100%; padding: 0;">
                            <div id="schedule" style="height: 100%">
                                <div style="height: 100%; overflow: auto; overflow-x:hidden">
                                    <h4 th:text="${todayMonth} + 'Ïõî ' + ${todayDate} + 'Ïùº'"></h4>
                                    <!--Ïò§Îäò ÏùºÏ†ï-->
                                    <div>
                                        <!--Ï∂úÏû•-->
                                        <div class="row" th:if="${businessTripList.size()!=0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">Ï∂úÏû•</span>
                                            </div>
                                            <div class="col-10">
                                                <div th:each="b:${businessTripList}">
                                                    <p th:text="'- Ï∂úÏû• Î™©Ï†Å : ' + ${b.reason}"></p>
                                                    <p th:text="'- Ï∂úÏû• ÏßÄÏó≠ : ' + ${b.place}"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" th:if="${businessTripList.size()==0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">Ï∂úÏû•</span>
                                            </div>
                                            <div class="col-10">
                                                <p>- Í∏àÏùº Ï∂úÏû• ÏùºÏ†ïÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                                            </div>
                                        </div>
                                        <!--Î∞òÏ∞®/Ïó∞Ï∞®/Ìú¥Í∞Ä-->
                                        <div class="row" th:if="${vacationList.size()!=0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">Ìú¥Í∞Ä</span>
                                            </div>
                                            <div class="col-10">
                                                <div th:each="v:${vacationList}">
                                                    <p th:text="'- ' + ${v.category} + ' : ' +${v.title}"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" th:if="${vacationList.size()==0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">Ìú¥Í∞Ä</span>
                                            </div>
                                            <div class="col-10">
                                                <p>- Í∏àÏùº Ìú¥Í∞Ä ÏùºÏ†ïÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                                            </div>
                                        </div>
                                        <!--ÌöåÏùò ÏòàÏïΩ-->
                                        <div class="row" th:if="${reservationList.size()!=0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">ÌöåÏùò</span>
                                            </div>
                                            <div class="col-10">
                                                <div th:each="r:${reservationList}">
                                                    <p th:text="'‚è± ÌöåÏùòÏãúÍ∞Ñ : '+${r.startTime} + ' ~ ' +${r.endTime}"></p>
                                                    <p th:text="'- ÌöåÏùòÏã§ ÏúÑÏπò : ' + ${r.roomPlace} + ' ' + ${r.roomName}"></p>
                                                    <p th:text="'‚ùó ÌöåÏùò Î™©Ï†Å : ' + ${r.purpose}"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" th:if="${reservationList.size()==0}">
                                            <div class="col-2 scheduleTitle">
                                                <span style="text-align: center">ÌöåÏùò</span>
                                            </div>
                                            <div class="col-10">
                                                <p>- Í∏àÏùº ÌöåÏùò ÏùºÏ†ïÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-8" style="height: 100%; margin: 0;">
                        <div style="padding-left: 8px; height: 100%">
                            <div id="post_table" class="border">
                                <table class="table table-hover">
                                    <thead>
                                    <tr class="tr">
                                        <th style="width: 16%;"></th>
                                        <th scope="col" style="width: 40%;">Ï†úÎ™©</th>
                                        <th scope="col" style="width: 22%;">ÏûëÏÑ±Ïûê</th>
                                        <th scope="col" style="width: 22%;">ÏûëÏÑ±Ïùº</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="tr" th:each="post: ${postList}" th:onclick="|location.href='@{ /post/detail(postNo=${ post.postNo }) }'|">
                                        <td th:switch="${ post.noticeLv }" style="font-size: 0.8em;">
                                            <span th:case="4" th:text="${ post.postNo }"></span>
                                            <span th:case="3" style="padding: 2px 4px; border-radius: 2px; border: 1px solid green; color: green;">ÌåÄ Í≥µÏßÄ</span>
                                            <span th:case="2" style="padding: 2px 4px; border-radius: 2px; border: 1px solid orange; color: orange;">Î∂ÄÏÑú Í≥µÏßÄ</span>
                                            <span th:case="1" style="padding: 2px 4px; border-radius: 2px; border: 1px solid red; color: red;">Ï†ÑÏ≤¥ Í≥µÏßÄ</span>
                                        </td>
                                        <td class="title_td" th:text="${post.title}"></td>
                                        <td th:text="${post.writer}"></td>
                                        <td th:text="${#temporals.format(post.createdTime, 'yyyy-MM-dd HH:mm') }"></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<th:block layout:fragment="script">
    <script th:src="@{/js/home/home.js}"></script>
<!--    <script th:src="@{ /js/payment/list.js }"></script>-->
    <!--axiosÏÇ¨Ïö©-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</th:block>
</html>